# Balance Forecast

A production-ready React application for forecasting account balance over time based on recurring transactions. Built with React, TypeScript, Vite, Supabase, and Recharts.

## Features

- ðŸ’° **Transaction Management**: CRUD operations for recurring and one-time transactions
- ðŸ“Š **Balance Forecasting**: Daily balance calculations based on transaction patterns
- ðŸ“ˆ **Interactive Charts**: Visualize balance trends over time with Recharts
- ðŸ’¾ **Data Persistence**: All transactions stored in Supabase
- ðŸŽ¯ **Flexible Recurrence**: Support for daily, weekly, and monthly transactions
- ðŸ“± **Responsive Design**: Works seamlessly on desktop, tablet, and mobile
- âš¡ **Real-time Updates**: Instant forecast recalculation as you modify transactions

## Tech Stack

- **Frontend**: React 19 + TypeScript
- **Build Tool**: Vite
- **Styling**: Modern CSS with custom properties
- **Database**: Supabase (PostgreSQL)
- **Charting**: Recharts
- **Date Handling**: date-fns
- **Deployment**: Vercel

## Project Structure

```
src/
â”œâ”€â”€ components/          # React components
â”‚   â”œâ”€â”€ AddTransactionForm.tsx
â”‚   â”œâ”€â”€ TransactionList.tsx
â”‚   â””â”€â”€ ForecastChart.tsx
â”œâ”€â”€ hooks/              # Custom React hooks
â”‚   â””â”€â”€ useTransactions.ts
â”œâ”€â”€ lib/                # Business logic and utilities
â”‚   â”œâ”€â”€ supabaseClient.ts   # Supabase configuration
â”‚   â”œâ”€â”€ database.ts         # Database operations
â”‚   â””â”€â”€ forecast.ts         # Forecast calculations
â”œâ”€â”€ types/              # TypeScript type definitions
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ App.tsx             # Main app component
â”œâ”€â”€ App.css             # Global styles
â”œâ”€â”€ main.tsx            # React entry point
â””â”€â”€ index.css           # Base styles
```

## Getting Started

### Prerequisites

- Node.js 18+
- npm or yarn
- Supabase project with `transactions` table

### Installation

1. **Clone the repository**
```bash
git clone <repository-url>
cd balance-forecast
```

2. **Install dependencies**
```bash
npm install
```

3. **Set up environment variables**
Create a `.env.local` file in the project root:
```
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key_here
```

4. **Run the development server**
```bash
npm run dev
```

The app will open at `http://localhost:5173`

## Database Schema

### Transactions Table

```sql
CREATE TABLE transactions (
  id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  name TEXT NOT NULL,
  amount NUMERIC NOT NULL,
  start_date DATE NOT NULL,
  end_date DATE NOT NULL,
  frequency INTEGER NOT NULL DEFAULT 1,
  uom TEXT NOT NULL CHECK (uom IN ('day', 'week', 'month')),
  created_at TIMESTAMP DEFAULT NOW()
);
```

## Usage

### Adding a Transaction

1. Fill in the "Add Transaction" form with:
   - **Name**: Description of the transaction (e.g., "Salary", "Rent")
   - **Amount**: Positive (income) or negative (expense)
   - **Start Date**: When the transaction begins
   - **End Date**: When the transaction stops
   - **Frequency**: How often it recurs (0 = one-time)
   - **Unit**: Day, Week, or Month

2. Click "Add Transaction" to save it

### Forecasting

1. Set your **Starting Balance**
2. Choose **Months to Forecast** (1-12)
3. View the balance chart which updates in real-time

### Managing Transactions

- **Edit**: Click the pencil icon to modify transaction amount
- **Delete**: Click the X icon to remove a transaction
- **View**: Only transactions with future occurrences are shown

## Business Logic

### Key Algorithms

#### Occurrence Generation
Generates all dates when a transaction occurs between start and end dates, respecting frequency and unit of measure.

#### Future Occurrence Check
Efficiently determines (O(1)) if a transaction has at least one occurrence on or after today without generating all dates.

#### Cash Flow Calculation
Sums the amounts of all transactions that occur on a specific date.

#### Balance Calculation
Daily balance = Previous balance + Cash flow of the day

## Deployment

### Deploy to Vercel

1. **Push to GitHub**
```bash
git add .
git commit -m "Initial commit"
git push origin main
```

2. **Connect to Vercel**
   - Go to [vercel.com](https://vercel.com)
   - Import your repository
   - Add environment variables:
     - `VITE_SUPABASE_URL`
     - `VITE_SUPABASE_ANON_KEY`
   - Click "Deploy"

The app will be live at your Vercel URL!

## Available Scripts

```bash
npm run dev        # Start development server
npm run build      # Build for production
npm run preview    # Preview production build locally
npm run lint       # Run ESLint
```

## Development

### Adding New Features

1. **New Components**: Add to `src/components/`
2. **New Logic**: Add to `src/lib/`
3. **New Hooks**: Add to `src/hooks/`
4. **New Types**: Update `src/types/index.ts`

### Testing

Run the dev server and test manually:
```bash
npm run dev
```

## Browser Support

- Chrome (latest)
- Firefox (latest)
- Safari (latest)
- Edge (latest)

## Performance

- Lazy loading of chart data
- Optimized React renders with proper memoization
- Efficient Supabase queries with select() limitations
- CSS Grid for responsive layouts

## Security

- Uses Supabase Row Level Security (RLS) for data protection
- Anon key has read/write access only to public transactions
- No sensitive data stored in browser

## Troubleshooting

### "Missing Supabase environment variables"
Ensure `.env.local` contains `VITE_SUPABASE_URL` and `VITE_SUPABASE_ANON_KEY`

### Chart not displaying
Check browser console for errors, ensure Recharts is installed

### Transactions not loading
Verify Supabase connection and table exists with correct schema

## License

MIT

## Support

For issues or questions, please open a GitHub issue or contact the maintainers.
import reactDom from 'eslint-plugin-react-dom'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```
